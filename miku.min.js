!function(){const e="Miku",t=["run","creep","walk"],i={c:[{x:128,y:0,Q:0,e:0},{x:128,y:0,Q:0,e:1}],L:[{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:256,Q:0,e:0},{x:128,y:256,Q:0,e:0},{x:256,y:256,Q:0,e:0},{x:128,y:256,Q:0,e:0},{x:256,y:256,Q:0,e:0},{x:0,y:256,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:256,Q:0,e:0},{x:128,y:256,Q:0,e:0},{x:256,y:256,Q:0,e:0},{x:128,y:256,Q:0,e:0},{x:256,y:256,Q:0,e:0},{x:0,y:256,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:128,y:0,Q:0,e:1}],read:[{x:640,y:0,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:256,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:384,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:256,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:384,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:256,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:384,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:256,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:384,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:256,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:384,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:256,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:384,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:256,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:384,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:256,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:384,Q:0,e:0},{x:640,y:128,Q:0,e:0},{x:640,y:0,Q:0,e:0},{x:128,y:0,Q:0,e:1}],i:[{x:0,y:768,Q:0,e:0},{x:128,y:768,Q:0,e:0},{x:256,y:768,Q:0,e:0},{x:384,y:768,Q:0,e:0},{x:512,y:768,Q:0,e:0},{x:512,y:768,Q:0,e:0},{x:256,y:768,Q:0,e:0},{x:128,y:768,Q:0,e:0},{x:128,y:0,Q:0,e:1}],G:[{x:512,y:384,Q:0,e:0},{x:0,y:896,Q:0,e:0},{x:0,y:512,Q:0,e:0},{x:128,y:512,Q:0,e:0},{x:256,y:512,Q:0,e:0},{x:128,y:512,Q:0,e:0},{x:256,y:512,Q:0,e:0},{x:128,y:512,Q:0,e:0},{x:256,y:512,Q:0,e:0},{x:512,y:384,Q:0,e:0},{x:128,y:0,Q:0,e:1}],walk:[{x:0,y:384,Q:1,e:0},{x:512,y:512,Q:1,e:0},{x:384,y:256,Q:1,e:0},{x:768,y:256,Q:1,e:0},{x:384,y:512,Q:1,e:0},{x:768,y:256,Q:1,e:0},{x:384,y:256,Q:1,e:0},{x:768,y:256,Q:1,e:0},{x:384,y:512,Q:1,e:0},{x:768,y:256,Q:1,e:0},{x:384,y:256,Q:1,e:0},{x:0,y:384,Q:1,e:0},{x:128,y:0,Q:0,e:1}],creep:[{x:256,y:384,Q:0,e:0},{x:256,y:384,Q:0,e:0},{x:128,y:384,Q:.5,e:0},{x:256,y:384,Q:.5,e:0},{x:128,y:384,Q:.5,e:0},{x:256,y:384,Q:.5,e:0},{x:256,y:384,Q:0,e:0},{x:256,y:384,Q:0,e:0},{x:128,y:384,Q:.5,e:0},{x:256,y:384,Q:.5,e:0},{x:128,y:384,Q:.5,e:0},{x:256,y:384,Q:.5,e:0},{x:256,y:384,Q:0,e:0},{x:256,y:384,Q:0,e:0},{x:128,y:384,Q:.5,e:0},{x:256,y:384,Q:.5,e:0},{x:128,y:384,Q:.5,e:0},{x:256,y:384,Q:.5,e:0},{x:256,y:384,Q:0,e:0},{x:256,y:384,Q:0,e:0},{x:128,y:0,Q:0,e:1}],run:[{x:896,y:0,Q:1.5,e:0},{x:896,y:256,Q:1.5,e:0},{x:896,y:384,Q:1.5,e:0},{x:896,y:256,Q:1.5,e:0},{x:896,y:0,Q:1.5,e:0},{x:896,y:256,Q:1.5,e:0},{x:896,y:384,Q:1.5,e:0},{x:896,y:256,Q:1.5,e:0},{x:896,y:0,Q:1.5,e:0},{x:896,y:256,Q:1.5,e:0},{x:896,y:384,Q:1.5,e:0},{x:896,y:256,Q:1.5,e:0},{x:128,y:0,Q:0,e:1}],t:[{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:128,Q:0,e:0},{x:0,y:256,Q:0,e:0},{x:128,y:256,Q:0,e:0},{x:0,y:0,Q:0,e:0},{x:256,y:640,Q:.5,e:0},{x:0,y:0,Q:.5,e:0},{x:512,y:640,Q:.5,e:0},{x:0,y:0,Q:.5,e:0},{x:512,y:640,Q:.5,e:0},{x:0,y:0,Q:.5,e:0},{x:256,y:640,Q:.5,e:0},{x:0,y:0,Q:.5,e:0},{x:256,y:640,Q:.5,e:0},{x:0,y:0,Q:.5,e:0},{x:512,y:640,Q:.5,e:0},{x:0,y:0,Q:0,e:0},{x:640,y:640,Q:0,e:0},{x:128,y:0,Q:0,e:1}],D:[{x:128,y:0,Q:0,e:0},{x:768,y:0,Q:0,e:0},{x:768,y:128,Q:0,e:0},{x:768,y:512,Q:0,e:0},{x:768,y:640,Q:0,e:0},{x:128,y:0,Q:0,e:1}]},s=[{x:0,y:640,s:1},{x:256,y:896,s:-1},{x:512,y:896,s:1},{x:256,y:896,s:1},{x:768,y:768,s:1},{x:768,y:384,s:0},{x:128,y:1,s:0},{x:384,y:128,s:1},{x:768,y:896,s:1},{x:384,y:0,s:1},{x:128,y:128,s:0},{x:256,y:0,s:0},{x:256,y:128,s:0},{x:896,y:512,s:0}];window.Miku=class{constructor(){this.X=0,this.z=0,this.time=0,this.C=1,this.b=0,this.p=0,this.V=0,this.d=0,this.Y=0,this.o=0,this.h=!1,this.l=!0,this.v=!0,this.H=!1,this.q=!1,this.K=null,this.E=!1,this.U=function(){let t=document.getElementById(e+"WorkArea");return t||(t=document.createElement("div"),t.id=e+"WorkArea",t.style="position: fixed; background: transparent; z-index: 2147483643; width: 100vw; height: 100vh; left: 0px; top: 0px; transform: translate(0px, 0px); pointer-events: none; touch-action: none; -webkit-user-select: none; user-select: none;",document.body.appendChild(t)),t}(),this.O=function(){let t=document.createElement("div");return t.style='position: absolute; background: url("https://cdn.jsdelivr.net/gh/samiulalim1/Hatsune-Miku-Web-Pet@v1.0.0/spritesheet.png") 0px -128px; z-index: 2; width: 128px; height: 128px; left: -64px; top: -128px; transform: translate('+innerWidth/3+"px, 0px) scaleX(1); pointer-events: auto; cursor: context-menu; touch-action: none; -webkit-user-select: none; user-select: none;",document.getElementById(e+"WorkArea").appendChild(t),t}(),this.B(),this.Z=this.Z.bind(this),this.Z()}remove(){this.h=!0,this.K&&cancelAnimationFrame(this.K),this.O&&(this.O.remove(),this.O=null)}B(){this.O.addEventListener("pointerdown",e=>{e.preventDefault(),this.q=!0,this.l=!1,this.H=!1,this.v=!1,this.E=!1,this.d=0,this.Y=0,this.b=e.clientX,this.p=e.clientY,this.V=e.pointerId,this.O.setPointerCapture(this.V)}),this.O.addEventListener("pointermove",e=>{this.q&&e.pointerId===this.V&&(this.v=!1,this.X=e.clientX-this.b,this.z=e.clientY-this.p,this.b=e.clientX,this.p=e.clientY)});const e=e=>{e.pointerId===this.V&&(this.v=!0,this.q=!1,this.V=0,this.b=e.clientX,this.p=e.clientY,this.O.releasePointerCapture(e.pointerId))};this.O.addEventListener("pointerup",e),this.O.addEventListener("pointercancel",e)}Z(){if(this.h)return;const e=this.U.getBoundingClientRect(),x=this.O.getBoundingClientRect(),y=x.bottom===innerHeight;if(this.q){let e=performance.now(),t=this.p+x.height-15,i=x.x+x.width/2,y=this.b-i;if(e-this.time>250){let t=s[y<-6?0:y<-3?1:y>6?2:y>3?3:4];this.r(t.x,t.y),this.C=t.s,this.time=e}this.R(this.b,t,this.C)}else if(this.v)if(y){this.o++,this.l=!1;let e=s[this.o>30?6:this.o>20?7:this.o>10?8:9];this.r(e.x,e.y),this.v=e.s}else{this.o=0,this.z=this.z<-30?-30:this.z;let t=e.width,i=innerHeight-x.bottom,y=x.x+x.width/2+this.X/2,h=i>0?x.bottom+this.z+7:innerHeight;if(y<50||y>t-50)if(h<100||this.l)this.l=!0,y=y<50?50:t-50;else if(y<0||y>t)return this.H=!0,this.l=!1,this.v=!1,y=y<0?0:t,this.C=y===t?-1:1,this.R(y,h,this.C),this.r(s[10].x,s[10].y),void(this.K=requestAnimationFrame(this.Z));this.C=this.X<0?-1:1,this.z=this.z<0?this.z+.5:this.z,this.r(s[5].x,s[5].y),this.R(y,h,this.C)}else if(this.H)if(y){this.H=!1,this.Y=0;var h=t[Math.floor(Math.random()*t.length)];this.E=i[h]}else{this.Y++;let e=Math.floor(this.Y/15),t=4===e||12===e?13:5===e||11===e?12:6===e||10===e?11:0;if(t){let e=innerHeight-x.bottom,i=x.x+x.width/2,y=e>0?x.bottom+1:innerHeight;this.R(i,y,this.C),this.r(s[t].x,s[t].y)}this.Y>180&&(this.Y=0)}else if(this.E){this.d=0,this.Y++;let t=this.E[Math.floor(this.Y/25)];if(this.r(t.x,t.y),t.Q){var Q=x.x+x.width/2;Q<50?this.C=-1:Q>e.width-50&&(this.C=1),Q=1===this.C?Q-t.Q:Q+t.Q,this.R(Q,innerHeight,this.C)}t.e&&(this.Y=0,this.E=!1)}else if(this.d>100){this.Y=0;var n=Object.keys(i);h=n[Math.floor(Math.random()*n.length)],this.E=i[h]}else this.d++;this.K=requestAnimationFrame(this.Z)}R(e,t,i=1,s=1){this.O.style.transform="translate("+e+"px, "+t+"px) scale("+i+", "+s+")"}r(e,t){this.O.style.backgroundPosition=-e+"px "+-t+"px"}}}();
